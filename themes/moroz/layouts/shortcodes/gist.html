{{- $file := ( .Get 0 ) -}}
{{- $format := ( .Get 1 ) -}}
{{- $filename := ( .Get 2 ) -}}
{{- $attrs := "{\"linenostart\":1}" -}}
{{- if eq (len .Params) 4 -}}
  {{- $attrs = (.Get 3) -}}
{{- end -}}
{{- $content := (readFile $file) -}}

<h3 class="gist-title">File: {{ $filename -}}</h3>
<article class="gist" data-code="{{- $content | safeHTMLAttr -}}">
  {{- $highlighted := transform.Highlight $content $format "" -}}
  {{- $highlighted | safeHTML -}}
</article>
