{{- $file := ( .Get 0 ) -}}
{{- $format := ( .Get 1 ) -}}
{{- $filename := ( .Get 2 ) -}}
{{- $attrs := "{\"linenostart\":1}" -}}
{{- if eq (len .Params) 4 -}}
  {{- $attrs = (.Get 3) -}}
{{- end -}}
{{- $content := (readFile $file) -}}

<article class="gist"><h3 class="gist-title">File: {{ $filename -}}</h3>
  <pre class="language-{{ $format }} line-numbers" data-code="{{- $content | safeHTMLAttr -}}" data-meta="{{- $attrs | safeHTMLAttr -}}"><code>{{ $content }}</code></pre>
</article>
